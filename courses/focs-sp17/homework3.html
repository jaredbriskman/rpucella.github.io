<!DOCTYPE html>
<html>

  <head>
    
    <meta charset="utf-8">
    <title>Homework 3</title>

    <link rel="stylesheet" href="alt.css" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,800,700' rel='stylesheet' type='text/css'>

    <script src="autoscroll.js"></script>
    
    <style>

      hr { margin-top: 50px; }

        code,tt,pre {
          font-size: 110%;
        }
	
        div.lect {
	  padding-top: 0;
       	  padding-left: 3em;
	  margin-top:0;
        }
    	p.ann { 
    	  padding-left: 3em;
    	  text-indent: -3em; 
    	}
	p.ann_ctd{
	  padding-left: 3em;
        }
    	span.hdr {
   	  padding-right: 1em
    	}

	.hidden {
	  visibility: hidden;
        }

        tt.code {
           background: #e6e6e6;
        }

      div.code {
      border: 1px solid #c6c6c6;
      border-radius: 5px;
      padding: 0px;
      margin-bottom: 20px;
      }
      
      div.code p {
      margin:0px;
      padding:5px 10px;
      background:#eeeeee;
      font-style: italic;
      cursor:pointer;
      }

      div.code p:hover {
      background:#cccccc;
      }

      div.code pre { 
      display:none;
      padding: 10px;
      font-size:100%;
      }

      div.code.visible pre  {
      display:block;
      }
      
ol.question {
    padding-top:1em;
    list-style-type: decimal;
}

ol.subquestion {
    list-style-type: upper-alpha;
}

ol > li {
    padding:4px 8px; /* Add some spacing around the content */
}

li ol,
li ul {margin-top:6px;}

li > p { margin-top:0;}


    </style>

    <script>
      function toggleShowHide (p) { 
      var div = p.parentNode;
        if (div.className && div.className.startsWith("visible")) {
          div.className = "code";
      } else {
        div.className = "visible code";
      }
      }
    </script>

  </head>


  <body>

    <div class="navbar">

      <div class="home">
	<a href="../../index.html"><img src="../../home.png" style="height: 1.6em;"></a>
      </div>

      <ul>
	<li><a href="index.html"><b>Foundations of Computer Science SP17</b></a></li> 
	<li class="hidden"><a class="scrollto" href="#announcements">Announcements</a></li>
	<li class="hidden"><a class="scrollto" href="#info">Course Info</a></li>
	<li class="hidden"><a class="scrollto" href="#lectures">Lectures</a></li>
	<li class="hidden"><a class="scrollto" href="#homeworks">Homeworks</a></li>
      </ul>
    </div>


    <!-- padding -->
    <div id="top" style="height: 5em;"></div>
    
    <h1 class="clear">Homework 3</h1>
    
    <p class="subtitle">Due date: Friday, Feb 10 (23:59)</p>

    <p><b>Note on integrity:</b> This homework is meant to be done
    individually. You may discuss problems with fellow students, but
    all work must be entirely your own, and should not be from any
    other course, present, past, or future. If you use a solution from
    another source you must cite it &mdash; this includes when that source
      is someone else helping you.</p>

    <p>Every source file you submit should begin with a block comment
      that lists your <span style="text-decoration:underline;">name</span>, your <span style="text-decoration:underline;">email address</span>, and any <span style="text-decoration:underline;">remarks</span> that you
      wish to make to the instructor.</p>

    <p>All programming is to be done in OCaml v4.</p>

    <p>Feel free to define helper functions if you need them.</p>

    <p>Please code your answers by modifying the
      file <a href="homework3.ml"><tt>homework3.ml</tt></a> provided.</p>


    <p>Please <b>do not change the types in the signature of the
	function stubs I provide</b>. Doing so will make it
	impossible to load your code into the testing infrastructure,
      and make me unhappy.</p>


    <p>Electronic submission instructions:</p>

    <ul>
<!--      <li>Download the --
  --      file <a href="hw3-checker.ml"><tt>hw3-checker.ml</tt></a> --
  --      into the same directory as your homework solution.</li> -->
      <li>Start a <i>new</i> OCaml shell.</li>
      <li>Load your homework code via <tt>#use
      "homework3.ml";;</tt></li>
      <li>If there are any error, do not submit. I can't test what I
	can't <tt>#use</tt>.</li>
<!--      <li>Load the homework checker via <tt>#use "hw3-checker.ml";;</tt></li>
      <li>The homework checker checks that you've implemented all
      functions (or provided stubs for them) and that those functions
      have the type that I asked you to give them. If the checker says
      your types are OK, then you're fine. If the checker gives you an
      error, fix it. If you believe that the checker gives you an
      error wrongly, send me an email.</li> -->
      <li>When you're ready to submit, send an email with your file <tt>homework3.ml</tt> as an attachment to <tt>focs.sp17@gmail.com</tt> with subject <i>Homework 3 submission</i>.</li>
    </ul>

    <hr>

    <p class="subtitle">Updates</p>
    <ul class="simple">
      <li>Feb 9: Added some precision to the acceptance requirement to Question 2(B). And fixed the sample output which did not match either the old requirement, or the new one!</li>
    </ul>
	
    <hr>

    <p>Consider the following type for finite automata:</p>
    <pre>
   type 'a fa = { states: 'a list;
                  alphabet: char list;
                  delta: ('a * char * 'a) list;
                  start : 'a;
                  final : 'a list }
</pre>
<p>A finite automaton  is described by a record with fields holding the various
components of the automaton: the set of states, the alphabet, the
transition relation &Delta;, the start state, and the set of final states. Lists are  
used to represent sets. The transition relation is represented using
  list of triples (<i>p</i>,<i>a</i>,<i>q</i>), stating that in
  state <i>p</i>, reading symbol 
  <i>a</i> makes the machine transition to state <i>q</i>. The automaton itself is
parameterized over the type of states. (That means that you can use
               strings, or integers, or anything you want to represent
               states.)  
</p>

<p>Records are basically dictionaries, except that they are statically
    typed, and the fields available in a record are part of its
    type. For information how to work with records in
    OCaml, <a href="http://www.cs.cornell.edu/courses/cs3110/2011sp/recitations/rec02-ocaml/ocaml.htm">check
    out this 
    link</a> and scroll down to the <i>Records</i> section. Note that
    aside from pattern matching, you can also access the fields of a
  record using the <tt>.</tt> notation: <tt>record.fld</tt> will
  return the value of field <tt>fld</tt> of <tt>record</tt>.
</p>

<p>Here is an example of a finite automaton that accepts the
  language of all strings over <tt>{a,b,c}</tt> whose last three
  symbols are <tt>b</tt>s. </p>

<pre>
   let faLastThreeB = {
     states = [0;1;2;3];
     alphabet = ['a';'b';'c'];
     delta = [ (0,'a',0);
               (0,'b',0);
               (0,'c',0);
               (0,'b',1);
               (1,'b',2);
               (2,'b',3); ];
     start = 0;
     final = [3]
   } 
</pre>

<p>Here is an example of a (deterministic) finite automaton that accepts
  the set of all strings over <tt>{a,b}</tt> that contains a number
  of <tt>a</tt>s that is a multiple of 3. 
</p>

<pre>
   let faThreeA = { 
     states = ["start";"one";"two"];
     alphabet = ['a';'b'];
     delta = [ ("start",'a',"one");
               ("one",'a',"two");
               ("two",'a',"start");
               ("start",'b',"start");
               ("one",'b',"one");
               ("two",'b',"two") ];
     start = "start";
     final = ["start"]
   } 
</pre>

    <hr>

    <ol class="question">
      <li> <p><b>Finite Automata</b></p>

	<ol class="subquestion">

	  <li><p>
	      Code a function <tt class="code">hasFinal</tt> of
	    type <tt class="code">'a fa -> 'a list -> bool</tt>
	    where <tt>hasFinal m qs</tt> returns true if one of the
	      states in <tt>qs</tt> is a final state of
	      automaton <tt>m</tt>, and false
	    otherwise. </p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# hasFinal faLastThreeB [];;
- : bool = false
# hasFinal faLastThreeB [0];;
- : bool = false
# hasFinal faLastThreeB [0;1];;
- : bool = false
# hasFinal faLastThreeB [0;1;2];;
- : bool = false
# hasFinal faLastThreeB [0;1;2;3];;
- : bool = true
# hasFinal faLastThreeB [3];;
- : bool = true
# hasFinal faThreeA ["start";"one"];;
- : bool = true
</pre>
</div>
	  </li>


	  <li><p>
	      Code a function <tt class="code">reachableStates</tt> of
	    type <tt class="code">'a fa -> 'a -> char -> 'a list</tt>
	    where <tt>reachableStates m q a</tt> returns the list of
	      states of <tt>m</tt> that can be reached by a transition 
	      labeled <tt>a</tt> from state <tt>q</tt>.</p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# reachableStates faLastThreeB 0 'a';;
- : int list = [0]
# reachableStates faLastThreeB 0 'b';;
- : int list = [0; 1]
# reachableStates faLastThreeB 1 'a';;
- : int list = []
# reachableStates faLastThreeB 1 'b';;
- : int list = [2]
# reachableStates faLastThreeB 2 'a';;
- : int list = []
# reachableStates faLastThreeB 2 'b';;
- : int list = [3]
# reachableStates faLastThreeB 3 'a';;
- : int list = []
# reachableStates faLastThreeB 3 'b';;
- : int list = []
# reachableStates faThreeA "start" 'a';;
- : string list = ["one"]
</pre>
	  </div>
	  </li>


	  <li><p>
	      Code a function <tt class="code">follow</tt> of
	    type <tt class="code">'a fa -> 'a list -> char -> 'a list</tt>
	    where <tt>follow m qs a</tt> returns the list of
	      states of <tt>m</tt> that are reachable by following a transition 
	      labeled <tt>a</tt> from any of the states
	      in <tt>qs</tt>.</p>

	    <p>(For your own sanity, you should make
	      sure that the resulting list has no duplicate
	      states. Execution of later functions may slow to a
	      crawl otherwise. The easiest way to do so is to
	      implement a function that adds states to an existing list
	      of states but making sure that it only adds a state if
	      it isn't already in the list.)</p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# follow faThreeA [] 'a';;
- : string list = []
# follow faThreeA ["start"] 'a';;
- : string list = ["one"]
# follow faThreeA ["start"] 'b';;
- : string list = ["start"]
# follow faThreeA ["start"; "one"] 'a';;
- : string list = ["one"; "two"]
# follow faThreeA ["start"; "one"] 'b';;
- : string list = ["start"; "one"]
# follow faLastThreeB [0;1] 'a';;
- : int list = [0]
# follow faLastThreeB [0;1] 'b';;
- : int list = [0; 1; 2]
</pre>
	  </div>	  </li>


	  <li><p>
	      Code a function <tt class="code">followAll</tt> of
	    type <tt class="code">'a fa -> 'a list -> char list -> 'a list</tt>
	    where <tt>followAll m qs as</tt> returns the list of
	      states of <tt>m</tt> that are reachable by following a
	      sequence of transitions labeled by the symbols
	      in <tt>as</tt> (in order) starting from any of the states
	      in <tt>qs</tt>.</p>

	    <p>(Again, for your own sanity, you should make
	      sure that the resulting list has no duplicate
	      states.)</p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# followAll faThreeA [] [];;
- : string list = []
# followAll faThreeA [] ['a'];;
- : string list = []
# followAll faThreeA [] ['a';'b'];;
- : string list = []
# followAll faThreeA ["start"] [];;
- : string list = ["start"]
# followAll faThreeA ["start"] ['a'];;
- : string list = ["one"]
# followAll faThreeA ["start"] ['a';'b'];;
- : string list = ["one"]
# followAll faThreeA ["start"] ['a';'a'];;
- : string list = ["two"]
# followAll faThreeA ["start";"one"] ['a';'a'];;
- : string list = ["two"; "start"]
# followAll faThreeA ["start";"one"] ['a';'a';'b'];;
- : string list = ["two"; "start"]
# followAll faThreeA ["start";"one"] ['a';'a';'b';'a'];;
- : string list = ["start"; "one"]
# followAll faLastThreeB [0;1] ['a';'b';'b';'b'];;
- : int list = [0; 1; 2; 3]
</pre>
	  </div>	  </li>


	  <li><p>
	      Code a function <tt class="code">accept</tt> of
	    type <tt class="code">'a fa -> string -> bool</tt>
	    where <tt>accept m s</tt> returns true if and only if
	      finite automaton <tt>m</tt> accepts the
	      string <tt>s</tt>. That is, it returns true exactly if
	      there is a way to follow the transitions of <tt>m</tt>
	      labeled by the symbols in <tt>s</tt>
	      from the start state to a final state.</p>

	    <p>You can use function <tt>explode</tt> (provided in the homework
	    code) to turn a string into a list of characters. You
	      should probably also use <tt>followAll</tt>...</p>

	    <p>For testing purposes, I've provided you with a function <tt>lang</tt>
	      where <tt>lang m k</tt> prints out all the strings of length up to <tt>k</tt>
	      accepted by finite automaton <tt>m</tt>. Note that it calls 
	      <tt>accept</tt>, so it won't work correctly until you
	      implement that function. </p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# accept faThreeA "babab";;
- : bool = false
# accept faThreeA "bababa";;
- : bool = true
# accept faThreeA "bababab";;
- : bool = true
# accept faLastThreeB "abb";;
- : bool = false
# accept faLastThreeB "abbb";;
- : bool = true
# accept faLastThreeB "abbbb";;
- : bool = true
# lang faLastThreeB 6;;
  bbb
  abbb
  bbbb
  cbbb
  aabbb
  babbb
  cabbb
  abbbb
  bbbbb
  cbbbb
  acbbb
  bcbbb
  ccbbb
  aaabbb
  baabbb
  caabbb
  ababbb
  bbabbb
  cbabbb
  acabbb
  bcabbb
  ccabbb
  aabbbb
  babbbb
  cabbbb
  abbbbb
  bbbbbb
  cbbbbb
  acbbbb
  bcbbbb
  ccbbbb
  aacbbb
  bacbbb
  cacbbb
  abcbbb
  bbcbbb
  cbcbbb
  accbbb
  bccbbb
  cccbbb
</pre>
</div>
	  </li>


	</ol>

      </li>



      <li> <p><b>Designing Finite Automata</b></p>

        <p>In this question, I will ask you to come up with finite
	  automata. You can test your automata
	  with the code you wrote in Question 1. </p>

	<p>For submission purposes, I ask you to define those finite
	  automata as constants using <tt>let</tt> with a fixed
	  name given below in each question. There is already a
	  placeholder in <tt>homework3.ml</tt> for those answers. Just
	  replace the placeholder with your definition.</p>

	<ol class="subquestion">

	  <li><p>
	      Design a finite automaton <tt class="code">fa_q2_a</tt> for
	      the language consisting of all strings over the alphabet
	      <tt>{d,e,f}</tt> of length at least three where the third
	      symbol from the end is an <tt>f</tt>.
	    </p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# lang fa_q2_a 6;;
  fdd
  fed
  ffd
  fde
  fee
  ffe
  fdf
  fef
  fff
  dfdd
  efdd
  ffdd
  dfed
  efed
  ffed
  dffd
  effd
  fffd
  dfde
  efde
  ffde
  dfee
  efee
  ffee
  dffe
  effe
  fffe
  dfdf
  efdf
  ffdf
  dfef
  efef
  ffef
  dfff
  efff
  ffff
  ddfdd
  edfdd
  fdfdd
  defdd
  eefdd
  fefdd
  dffdd
  effdd
  fffdd
  ddfed
  edfed
  fdfed
  defed
  eefed
  fefed
  dffed
  effed
  fffed
  ddffd
  edffd
  fdffd
  deffd
  eeffd
  feffd
  dfffd
  efffd
  ffffd
  ddfde
  edfde
  fdfde
  defde
  eefde
  fefde
  dffde
  effde
  fffde
  ddfee
  edfee
  fdfee
  defee
  eefee
  fefee
  dffee
  effee
  fffee
  ddffe
  edffe
  fdffe
  deffe
  eeffe
  feffe
  dfffe
  efffe
  ffffe
  ddfdf
  edfdf
  fdfdf
  defdf
  eefdf
  fefdf
  dffdf
  effdf
  fffdf
  ddfef
  edfef
  fdfef
  defef
  eefef
  fefef
  dffef
  effef
  fffef
  ddfff
  edfff
  fdfff
  defff
  eefff
  fefff
  dffff
  effff
  fffff
  dddfdd
  eddfdd
  fddfdd
  dedfdd
  eedfdd
  fedfdd
  dfdfdd
  efdfdd
  ffdfdd
  ddefdd
  edefdd
  fdefdd
  deefdd
  eeefdd
  feefdd
  dfefdd
  efefdd
  ffefdd
  ddffdd
  edffdd
  fdffdd
  deffdd
  eeffdd
  feffdd
  dfffdd
  efffdd
  ffffdd
  dddfed
  eddfed
  fddfed
  dedfed
  eedfed
  fedfed
  dfdfed
  efdfed
  ffdfed
  ddefed
  edefed
  fdefed
  deefed
  eeefed
  feefed
  dfefed
  efefed
  ffefed
  ddffed
  edffed
  fdffed
  deffed
  eeffed
  feffed
  dfffed
  efffed
  ffffed
  dddffd
  eddffd
  fddffd
  dedffd
  eedffd
  fedffd
  dfdffd
  efdffd
  ffdffd
  ddeffd
  edeffd
  fdeffd
  deeffd
  eeeffd
  feeffd
  dfeffd
  efeffd
  ffeffd
  ddfffd
  edfffd
  fdfffd
  defffd
  eefffd
  fefffd
  dffffd
  effffd
  fffffd
  dddfde
  eddfde
  fddfde
  dedfde
  eedfde
  fedfde
  dfdfde
  efdfde
  ffdfde
  ddefde
  edefde
  fdefde
  deefde
  eeefde
  feefde
  dfefde
  efefde
  ffefde
  ddffde
  edffde
  fdffde
  deffde
  eeffde
  feffde
  dfffde
  efffde
  ffffde
  dddfee
  eddfee
  fddfee
  dedfee
  eedfee
  fedfee
  dfdfee
  efdfee
  ffdfee
  ddefee
  edefee
  fdefee
  deefee
  eeefee
  feefee
  dfefee
  efefee
  ffefee
  ddffee
  edffee
  fdffee
  deffee
  eeffee
  feffee
  dfffee
  efffee
  ffffee
  dddffe
  eddffe
  fddffe
  dedffe
  eedffe
  fedffe
  dfdffe
  efdffe
  ffdffe
  ddeffe
  edeffe
  fdeffe
  deeffe
  eeeffe
  feeffe
  dfeffe
  efeffe
  ffeffe
  ddfffe
  edfffe
  fdfffe
  defffe
  eefffe
  fefffe
  dffffe
  effffe
  fffffe
  dddfdf
  eddfdf
  fddfdf
  dedfdf
  eedfdf
  fedfdf
  dfdfdf
  efdfdf
  ffdfdf
  ddefdf
  edefdf
  fdefdf
  deefdf
  eeefdf
  feefdf
  dfefdf
  efefdf
  ffefdf
  ddffdf
  edffdf
  fdffdf
  deffdf
  eeffdf
  feffdf
  dfffdf
  efffdf
  ffffdf
  dddfef
  eddfef
  fddfef
  dedfef
  eedfef
  fedfef
  dfdfef
  efdfef
  ffdfef
  ddefef
  edefef
  fdefef
  deefef
  eeefef
  feefef
  dfefef
  efefef
  ffefef
  ddffef
  edffef
  fdffef
  deffef
  eeffef
  feffef
  dfffef
  efffef
  ffffef
  dddfff
  eddfff
  fddfff
  dedfff
  eedfff
  fedfff
  dfdfff
  efdfff
  ffdfff
  ddefff
  edefff
  fdefff
  deefff
  eeefff
  feefff
  dfefff
  efefff
  ffefff
  ddffff
  edffff
  fdffff
  deffff
  eeffff
  feffff
  dfffff
  efffff
  ffffff
</pre>
	  </div>
	  </li>


	  <li><p>
	      Design a finite automaton
	      <tt class="code">fa_q2_b</tt> for
	      the language consisting of all strings over the
	      alphabet <tt>{d,e,f}</tt> in which every <i>non-final</i>
	      <tt>f</tt> is always immediately followed by an <tt>f</tt>. (A final symbol is the last symbol in a string.)
	    </p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# lang fa_q2_b 6;;
  &lt;epsilon&gt;
  d
  e
  f
  dd
  ed
  de
  ee
  df
  ef
  ff
  ddd
  edd
  ded
  eed
  dde
  ede
  dee
  eee
  ddf
  edf
  def
  eef
  dff
  eff
  fff
  dddd
  eddd
  dedd
  eedd
  dded
  eded
  deed
  eeed
  ddde
  edde
  dede
  eede
  ddee
  edee
  deee
  eeee
  dddf
  eddf
  dedf
  eedf
  ddef
  edef
  deef
  eeef
  ddff
  edff
  deff
  eeff
  dfff
  efff
  ffff
  ddddd
  edddd
  deddd
  eeddd
  ddedd
  ededd
  deedd
  eeedd
  ddded
  edded
  deded
  eeded
  ddeed
  edeed
  deeed
  eeeed
  dddde
  eddde
  dedde
  eedde
  ddede
  edede
  deede
  eeede
  dddee
  eddee
  dedee
  eedee
  ddeee
  edeee
  deeee
  eeeee
  ddddf
  edddf
  deddf
  eeddf
  ddedf
  ededf
  deedf
  eeedf
  dddef
  eddef
  dedef
  eedef
  ddeef
  edeef
  deeef
  eeeef
  dddff
  eddff
  dedff
  eedff
  ddeff
  edeff
  deeff
  eeeff
  ddfff
  edfff
  defff
  eefff
  dffff
  effff
  fffff
  dddddd
  eddddd
  dedddd
  eedddd
  ddeddd
  ededdd
  deeddd
  eeeddd
  dddedd
  eddedd
  dededd
  eededd
  ddeedd
  edeedd
  deeedd
  eeeedd
  dddded
  eddded
  dedded
  eedded
  ddeded
  ededed
  deeded
  eeeded
  dddeed
  eddeed
  dedeed
  eedeed
  ddeeed
  edeeed
  deeeed
  eeeeed
  ddddde
  edddde
  deddde
  eeddde
  ddedde
  ededde
  deedde
  eeedde
  dddede
  eddede
  dedede
  eedede
  ddeede
  edeede
  deeede
  eeeede
  ddddee
  edddee
  deddee
  eeddee
  ddedee
  ededee
  deedee
  eeedee
  dddeee
  eddeee
  dedeee
  eedeee
  ddeeee
  edeeee
  deeeee
  eeeeee
  dddddf
  eddddf
  dedddf
  eedddf
  ddeddf
  ededdf
  deeddf
  eeeddf
  dddedf
  eddedf
  dededf
  eededf
  ddeedf
  edeedf
  deeedf
  eeeedf
  ddddef
  edddef
  deddef
  eeddef
  ddedef
  ededef
  deedef
  eeedef
  dddeef
  eddeef
  dedeef
  eedeef
  ddeeef
  edeeef
  deeeef
  eeeeef
  ddddff
  edddff
  deddff
  eeddff
  ddedff
  ededff
  deedff
  eeedff
  dddeff
  eddeff
  dedeff
  eedeff
  ddeeff
  edeeff
  deeeff
  eeeeff
  dddfff
  eddfff
  dedfff
  eedfff
  ddefff
  edefff
  deefff
  eeefff
  ddffff
  edffff
  deffff
  eeffff
  dfffff
  efffff
  ffffff
</pre>
	  </div>
	  </li>


	  <li><p>
	      Design a finite automaton
	      <tt class="code">fa_q2_c</tt> for
	      the language consisting of all strings over the alphabet
	      <tt>{d,e,f}</tt> in which there are never more than
	      two consecutive <tt>d</tt>s and never more than two
	      consecutive <tt>e</tt>s in a row.
	    </p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# lang fa_q2_c 5;;
  &lt;epsilon&gt;
  d
  e
  f
  dd
  ed
  fd
  de
  ee
  fe
  df
  ef
  ff
  edd
  fdd
  ded
  eed
  fed
  dfd
  efd
  ffd
  dde
  ede
  fde
  dee
  fee
  dfe
  efe
  ffe
  ddf
  edf
  fdf
  def
  eef
  fef
  dff
  eff
  fff
  dedd
  eedd
  fedd
  dfdd
  efdd
  ffdd
  dded
  eded
  fded
  deed
  feed
  dfed
  efed
  ffed
  ddfd
  edfd
  fdfd
  defd
  eefd
  fefd
  dffd
  effd
  fffd
  edde
  fdde
  dede
  eede
  fede
  dfde
  efde
  ffde
  ddee
  edee
  fdee
  dfee
  efee
  ffee
  ddfe
  edfe
  fdfe
  defe
  eefe
  fefe
  dffe
  effe
  fffe
  eddf
  fddf
  dedf
  eedf
  fedf
  dfdf
  efdf
  ffdf
  ddef
  edef
  fdef
  deef
  feef
  dfef
  efef
  ffef
  ddff
  edff
  fdff
  deff
  eeff
  feff
  dfff
  efff
  ffff
  ddedd
  ededd
  fdedd
  deedd
  feedd
  dfedd
  efedd
  ffedd
  ddfdd
  edfdd
  fdfdd
  defdd
  eefdd
  fefdd
  dffdd
  effdd
  fffdd
  edded
  fdded
  deded
  eeded
  feded
  dfded
  efded
  ffded
  ddeed
  edeed
  fdeed
  dfeed
  efeed
  ffeed
  ddfed
  edfed
  fdfed
  defed
  eefed
  fefed
  dffed
  effed
  fffed
  eddfd
  fddfd
  dedfd
  eedfd
  fedfd
  dfdfd
  efdfd
  ffdfd
  ddefd
  edefd
  fdefd
  deefd
  feefd
  dfefd
  efefd
  ffefd
  ddffd
  edffd
  fdffd
  deffd
  eeffd
  feffd
  dfffd
  efffd
  ffffd
  dedde
  eedde
  fedde
  dfdde
  efdde
  ffdde
  ddede
  edede
  fdede
  deede
  feede
  dfede
  efede
  ffede
  ddfde
  edfde
  fdfde
  defde
  eefde
  fefde
  dffde
  effde
  fffde
  eddee
  fddee
  dedee
  eedee
  fedee
  dfdee
  efdee
  ffdee
  ddfee
  edfee
  fdfee
  defee
  eefee
  fefee
  dffee
  effee
  fffee
  eddfe
  fddfe
  dedfe
  eedfe
  fedfe
  dfdfe
  efdfe
  ffdfe
  ddefe
  edefe
  fdefe
  deefe
  feefe
  dfefe
  efefe
  ffefe
  ddffe
  edffe
  fdffe
  deffe
  eeffe
  feffe
  dfffe
  efffe
  ffffe
  deddf
  eeddf
  feddf
  dfddf
  efddf
  ffddf
  ddedf
  ededf
  fdedf
  deedf
  feedf
  dfedf
  efedf
  ffedf
  ddfdf
  edfdf
  fdfdf
  defdf
  eefdf
  fefdf
  dffdf
  effdf
  fffdf
  eddef
  fddef
  dedef
  eedef
  fedef
  dfdef
  efdef
  ffdef
  ddeef
  edeef
  fdeef
  dfeef
  efeef
  ffeef
  ddfef
  edfef
  fdfef
  defef
  eefef
  fefef
  dffef
  effef
  fffef
  eddff
  fddff
  dedff
  eedff
  fedff
  dfdff
  efdff
  ffdff
  ddeff
  edeff
  fdeff
  deeff
  feeff
  dfeff
  efeff
  ffeff
  ddfff
  edfff
  fdfff
  defff
  eefff
  fefff
  dffff
  effff
  fffff
</pre>
	  </div>
	  </li>


	  <li><p>
	      Design a finite automaton
	      <tt class="code">fa_q2_d</tt> for
	      the language consisting of all strings over the alphabet
	      <tt>{d,e,f}</tt> in which there are an even number
	      of <tt>d</tt>s and an odd number of <tt>e</tt>s.
	    </p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# lang fa_q2_d 6;;
  e
  fe
  ef
  edd
  ded
  dde
  eee
  ffe
  fef
  eff
  fedd
  efdd
  fded
  dfed
  edfd
  defd
  fdde
  dfde
  feee
  efee
  ddfe
  eefe
  fffe
  eddf
  dedf
  ddef
  eeef
  ffef
  feff
  efff
  edddd
  deddd
  ddedd
  eeedd
  ffedd
  fefdd
  effdd
  ddded
  eeded
  ffded
  edeed
  deeed
  fdfed
  dffed
  fedfd
  efdfd
  fdefd
  dfefd
  edffd
  deffd
  dddde
  eedde
  ffdde
  edede
  deede
  fdfde
  dffde
  eddee
  dedee
  ddeee
  eeeee
  ffeee
  fefee
  effee
  fddfe
  dfdfe
  feefe
  efefe
  ddffe
  eeffe
  ffffe
  feddf
  efddf
  fdedf
  dfedf
  edfdf
  defdf
  fddef
  dfdef
  feeef
  efeef
  ddfef
  eefef
  fffef
  eddff
  dedff
  ddeff
  eeeff
  ffeff
  fefff
  effff
  fedddd
  efdddd
  fdeddd
  dfeddd
  edfddd
  defddd
  fddedd
  dfdedd
  feeedd
  efeedd
  ddfedd
  eefedd
  fffedd
  eddfdd
  dedfdd
  ddefdd
  eeefdd
  ffefdd
  feffdd
  efffdd
  fddded
  dfdded
  feeded
  efeded
  ddfded
  eefded
  fffded
  fedeed
  efdeed
  fdeeed
  dfeeed
  edfeed
  defeed
  dddfed
  eedfed
  ffdfed
  edefed
  deefed
  fdffed
  dfffed
  edddfd
  deddfd
  ddedfd
  eeedfd
  ffedfd
  fefdfd
  effdfd
  dddefd
  eedefd
  ffdefd
  edeefd
  deeefd
  fdfefd
  dffefd
  fedffd
  efdffd
  fdeffd
  dfeffd
  edfffd
  defffd
  fdddde
  dfddde
  feedde
  efedde
  ddfdde
  eefdde
  fffdde
  fedede
  efdede
  fdeede
  dfeede
  edfede
  defede
  dddfde
  eedfde
  ffdfde
  edefde
  deefde
  fdffde
  dfffde
  feddee
  efddee
  fdedee
  dfedee
  edfdee
  defdee
  fddeee
  dfdeee
  feeeee
  efeeee
  ddfeee
  eefeee
  fffeee
  eddfee
  dedfee
  ddefee
  eeefee
  ffefee
  feffee
  efffee
  ddddfe
  eeddfe
  ffddfe
  ededfe
  deedfe
  fdfdfe
  dffdfe
  eddefe
  dedefe
  ddeefe
  eeeefe
  ffeefe
  fefefe
  effefe
  fddffe
  dfdffe
  feeffe
  efeffe
  ddfffe
  eefffe
  fffffe
  eddddf
  dedddf
  ddeddf
  eeeddf
  ffeddf
  fefddf
  effddf
  dddedf
  eededf
  ffdedf
  edeedf
  deeedf
  fdfedf
  dffedf
  fedfdf
  efdfdf
  fdefdf
  dfefdf
  edffdf
  deffdf
  ddddef
  eeddef
  ffddef
  ededef
  deedef
  fdfdef
  dffdef
  eddeef
  dedeef
  ddeeef
  eeeeef
  ffeeef
  fefeef
  effeef
  fddfef
  dfdfef
  feefef
  efefef
  ddffef
  eeffef
  ffffef
  feddff
  efddff
  fdedff
  dfedff
  edfdff
  defdff
  fddeff
  dfdeff
  feeeff
  efeeff
  ddfeff
  eefeff
  fffeff
  eddfff
  dedfff
  ddefff
  eeefff
  ffefff
  feffff
  efffff
</pre>
	  </div>
	  </li>


	  <li><p>
	      Design a finite automaton <tt class="code">fa_q2_e</tt> for
	      the language consisting of all strings over the alphabet
	      <tt>{d,e,f}</tt> in which there are an even number
	      of <tt>d</tt>s, an odd number of <tt>e</tt>s, and
	      exactly two <tt>f</tt>s. 
	    </p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# lang fa_q2_e 6;;
  ffe
  fef
  eff
  ffedd
  fefdd
  effdd
  ffded
  fdfed
  dffed
  fedfd
  efdfd
  fdefd
  dfefd
  edffd
  deffd
  ffdde
  fdfde
  dffde
  ffeee
  fefee
  effee
  fddfe
  dfdfe
  feefe
  efefe
  ddffe
  eeffe
  feddf
  efddf
  fdedf
  dfedf
  edfdf
  defdf
  fddef
  dfdef
  feeef
  efeef
  ddfef
  eefef
  eddff
  dedff
  ddeff
  eeeff
</pre>
	  </div>
	  </li>



	</ol>
      </li>




      <li> <p><b>Finite Automata and Matrices</b></p>

	<p>There is another way to think about finite automata: linear
	algebra. We can represent the transitions of a finite
	automaton using matrices, and following transitions based on
	  the symbols in the input strings can be captured by matrix
	  multiplication. Here is the idea.</p>

	<p>Let M=(Q,&Sigma;,&Delta;,s,F) be a finite automaton, and
	  let q<sub>1</sub>, ..., q<sub>N</sub> be an arbitrary but
	  fixed ordering of the states in Q.</p>

	<p> To every symbol
	  &alpha;&in;&Sigma; we can associate an N&times;N matrix T<sub>&alpha;</sub>
	  representing the transitions of M on symbol &alpha;, which has a 1
	  at row R and column C  when there is a transition
	  from q<sub>R</sub> to q<sub>C</sub> labeled &alpha; in
	  &Delta;, and a 0 otherwise.</p>

	<p>The matrices T<sub>&alpha;</sub> for every
	&alpha;&in;&Sigma; have the property that the product matrix
	T<sub>&alpha;<sub>1</sub></sub>T<sub>&alpha;<sub>2
</sub></sub>...T<sub>&alpha;<sub>K</sub></sub> has a value > 0 in row
	  R and column C exactly when there is a path from
	  q<sub>R</sub> to q<sub>C</sub> following a sequence of
	  transitions labeled &alpha;<sub>1</sub>,
	  &alpha;<sub>2</sub>, ..., &alpha;<sub>K</sub>. (Question for
	  you if you want to dig deeper: what does the number at row R
	  and column C actually represent?)</p>

	<p>This is nearly all we need to determine if finite automaton M
	  can accept an input string.</p>

	<p>We can make things even easier by defining a vector
	  V<sub>F</sub> to represent the final states: the value at position C of
	  V<sub>F</sub> is 1 when q<sub>C</sub> is a final state in F; it is zero
	  otherwise. Therefore, the column vector
	(T<sub>&alpha;<sub>1</sub></sub>T<sub>&alpha;<sub>2
	  </sub></sub>...T<sub>&alpha;<sub>K</sub></sub>)(V<sub>F</sub>)<sup>T</sup> has a value > 0 in row
	  R exactly when there is a path from
	  q<sub>R</sub> to a final state of M following a sequence of
	  transitions labeled &alpha;<sub>1</sub>,
	  &alpha;<sub>2</sub>, ..., &alpha;<sub>K</sub>.</p>

	<p>We can also define a vector V<sub>I</sub> representing the initial
	state: the value at position C of V<sub>I</sub> is 1 when q<sub>C</sub>
	  is the initial state s, and 0 otherwise. Therefore, the product (V<sub>I</sub>)(T<sub>&alpha;<sub>1</sub></sub>T<sub>&alpha;<sub>2
	  </sub></sub>...T<sub>&alpha;<sub>K</sub></sub>)(V<sub>F</sub>)<sup>T</sup>
	  (which is a 1x1 matrix!) has a value > 0 exactly when there
	  is a path from the initial state of M to a final state of M
	  following a sequence of transitions labeled
	  &alpha;<sub>1</sub>, &alpha;<sub>2</sub>, ...,
	  &alpha;<sub>K</sub> &mdash; that is, exactly when M accepts string
	  &alpha;<sub>1</sub>&alpha;<sub>2</sub>...&alpha;<sub>K</sub>.</p>

	<p>Boom! To determine is M accepts a string, construct the
	matrices V<sub>I</sub>, V<sub>F</sub>, and T<sub>&alpha;</sub> for
	every &alpha; in the string, multiply as above, and check if
	  the result is > 0. </p>


	<ol class="subquestion">

	  <li><p>
	      Code a function <tt class="code">matTrans</tt> of
	    type <tt class="code">'a fa -> char -> int list list</tt>
	    where <tt>matTrans m a</tt> returns the matrix
	      T<sub>a</sub> described above corresponding to finite
	      automaton <tt>m</tt>.</p>

	    <p>A matrix is represented as a list of rows, each row a
	      list of integers, the way we did in Homework 1.</p>

	    <p>It makes sense to use as an ordering of the states the
	      order in which they appear in <tt>m.states</tt>. That's
	      the order I'm using in the examples below.</p>


<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# matTrans faThreeA 'a';;
- : int list list = [[0; 1; 0]; [0; 0; 1]; [1; 0; 0]]
# matTrans faThreeA 'b';;
- : int list list = [[1; 0; 0]; [0; 1; 0]; [0; 0; 1]]
# matTrans faLastThreeB 'a';;
- : int list list = [[1; 0; 0; 0]; [0; 0; 0; 0]; [0; 0; 0; 0]; [0; 0; 0; 0]]
# matTrans faLastThreeB 'b';;
- : int list list = [[1; 1; 0; 0]; [0; 0; 1; 0]; [0; 0; 0; 1]; [0; 0; 0; 0]]
# matTrans faLastThreeB 'c';;
- : int list list = [[1; 0; 0; 0]; [0; 0; 0; 0]; [0; 0; 0; 0]; [0; 0; 0; 0]]
</pre>
	  </div>
	  </li>

	  <li><p>
	      Code a function <tt class="code">matInit</tt> of
	    type <tt class="code">'a fa -> int list list</tt>
	    where <tt>matInit m</tt> returns a matrix representing
	      the row vector V<sub>I</sub> described
	      above corresponding to finite automaton <tt>m</tt>.</p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# matInit faThreeA;;
- : int list list = [[1; 0; 0]]
# matInit faLastThreeB;;
- : int list list = [[1; 0; 0; 0]]
</pre>
	  </div>
	  </li>


	  <li><p>
	      Code a function <tt class="code">matFinal</tt> of
	    type <tt class="code">'a fa -> int list list</tt>
	    where <tt>matFinal m</tt> returns a matrix representing
	      the column vector (V<sub>F</sub>)<sup>T</sup> described
	      above corresponding to finite automaton <tt>m</tt>.</p>

<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# matFinal faThreeA;;
- : int list list = [[1]; [0]; [0]]
# matFinal faLastThreeB;;
- : int list list = [[0]; [0]; [0]; [1]]
</pre>
	  </div>
	  </li>

	  <li><p>
	      Code a function <tt class="code">matAccept</tt> of
	    type <tt class="code">'a fa -> string -> bool</tt>
	    where <tt>matAccept m u</tt> returns true exactly when
	      finite automaton <tt>m</tt> accepts
	      string <tt>u</tt>. This function should work by applying
	      the matrix-based algorithm described above: constructing
	      the appropriate matrices, multiplying them
	      together, and testing the result.</p>

	    <p>To help you, I've supplied an implementation
	      of matrix multiplication <tt>multM</tt> taken from
	      Homework 1.</p>

	    <p>You can use function <tt>explode</tt> (provided in the homework
	    code) to turn a string into a list of characters.</p>
	    
	    <p>For testing purposes, I've provided you with a function <tt>matLang</tt>
	      where <tt>matLang m k</tt> prints out all the strings of length up to <tt>k</tt>
	      accepted by finite automaton <tt>m</tt>. Note that it calls 
	      <tt>matAccept</tt>, so it won't work correctly until you
	      implement that function. </p>


<div class="code">
  <p onClick="toggleShowHide(this)">Show sample output</p>
  <pre>
# matAccept faThreeA "babab";;
- : bool = false
# matAccept faThreeA "bababa";;
- : bool = true
# matAccept faThreeA "bababab";;
- : bool = true
# matAccept faLastThreeB "abb";;
- : bool = false
# matAccept faLastThreeB "abbb";;
- : bool = true
# matAccept faLastThreeB "abbbb";;
- : bool = true
# matLang faLastThreeB 6;;
  bbb
  abbb
  bbbb
  cbbb
  aabbb
  babbb
  cabbb
  abbbb
  bbbbb
  cbbbb
  acbbb
  bcbbb
  ccbbb
  aaabbb
  baabbb
  caabbb
  ababbb
  bbabbb
  cbabbb
  acabbb
  bcabbb
  ccabbb
  aabbbb
  babbbb
  cabbbb
  abbbbb
  bbbbbb
  cbbbbb
  acbbbb
  bcbbbb
  ccbbbb
  aacbbb
  bacbbb
  cacbbb
  abcbbb
  bbcbbb
  cbcbbb
  accbbb
  bccbbb
  cccbbb
</pre>
	  </div>
	  </li>


	</ol>
      </li>


    </ol>
	
    

  </body>
</html>
